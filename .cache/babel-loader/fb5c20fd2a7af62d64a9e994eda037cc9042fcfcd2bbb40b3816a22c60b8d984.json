{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nexport const RegisterUser = createAsyncThunk('Register', async (data, {\n  rejectedWithValue\n}) => {\n  try {\n    const res = await axios.post('/user/register', data);\n    return res.data;\n  } catch (error) {\n    rejectedWithValue(error.response.data.msg);\n  }\n});\nexport const LoginUser = createAsyncThunk('Login', async (data, {\n  rejectedWithValue\n}) => {\n  try {\n    const res = await axios.post('/user/login', data);\n    return res.data;\n  } catch (error) {\n    rejectedWithValue(error.response.data.msg);\n  }\n});\nconst userSlice = createSlice({\n  name: 'user',\n  initialState: {\n    isLoading: false,\n    token: localStorage.getItem('token') || null,\n    error: false,\n    isAuth: Boolean(localStorage.getItem('isAuth')) || null\n  },\n  reducers: {\n    logout: sta\n  },\n  extraReducers: {\n    [RegisterUser.pending]: state => {\n      state.isLoading = true;\n    },\n    [RegisterUser.fulfilled]: (state, action) => {\n      state.error = null;\n      state.token = action.payload.token;\n      state.isAuth = true;\n      localStorage.setItem('token', state.token);\n      localStorage.setItem('isAuth', state.isAuth);\n    },\n    [RegisterUser.rejected]: (state, action) => {\n      state.error = action.payload.error;\n      state.isAuth = false;\n    },\n    [LoginUser.pending]: state => {\n      state.isLoading = true;\n    },\n    [LoginUser.fulfilled]: (state, action) => {\n      state.error = null;\n      state.token = action.payload.token;\n      state.isAuth = true;\n      localStorage.setItem('token', state.token);\n      localStorage.setItem('isAuth', state.isAuth);\n    },\n    [LoginUser.rejected]: (state, action) => {\n      state.error = action.payload.error;\n      state.isAuth = false;\n    }\n  }\n});\nexport default userSlice;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","RegisterUser","data","rejectedWithValue","res","post","error","response","msg","LoginUser","userSlice","name","initialState","isLoading","token","localStorage","getItem","isAuth","Boolean","reducers","logout","sta","extraReducers","pending","state","fulfilled","action","payload","setItem","rejected"],"sources":["C:/Users/fulla/OneDrive/Desktop/Authentification/client/src/redux/slices/userSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice, } from \"@reduxjs/toolkit\";\r\nimport axios from 'axios'\r\n\r\n\r\n\r\n \r\n\r\nexport const RegisterUser = createAsyncThunk('Register',async(data,{rejectedWithValue})=>{\r\ntry{\r\nconst res = await axios.post('/user/register',data)\r\nreturn res.data;\r\n\r\n}\r\ncatch(error){\r\n rejectedWithValue(error.response.data.msg)\r\n\r\n}\r\n\r\n})\r\n\r\n\r\nexport const LoginUser = createAsyncThunk('Login',async(data,{rejectedWithValue})=>{\r\n    try{\r\n    const res = await axios.post('/user/login',data)\r\n    return res.data;\r\n    \r\n    }\r\n    catch(error){\r\n     rejectedWithValue(error.response.data.msg)\r\n    \r\n    }\r\n    \r\n    })\r\n    const userSlice = createSlice({\r\n      name :'user',\r\n      initialState:{\r\n        isLoading : false,\r\n        token :localStorage.getItem('token') || null,error: false,\r\n        isAuth :Boolean(localStorage.getItem('isAuth')) || null\r\n\r\n\r\n      },\r\n      reducers:{\r\n        logout:(sta)\r\n\r\n      },\r\n      extraReducers:{\r\n        [RegisterUser.pending]:(state)=>{state.isLoading = true},\r\n        [RegisterUser.fulfilled]:(state,action)=>{\r\n        state.error = null\r\n         state.token = action.payload.token \r\n         state.isAuth = true\r\n         localStorage.setItem('token',state.token) \r\n         localStorage.setItem('isAuth',state.isAuth) \r\n        },\r\n        [RegisterUser.rejected]:(state,action)=>{\r\n        state.error = action.payload.error\r\n        state.isAuth = false\r\n\r\n        },\r\n        [LoginUser.pending]:(state)=>{state.isLoading = true},\r\n        [LoginUser.fulfilled]:(state,action)=>{\r\n        state.error = null\r\n         state.token = action.payload.token \r\n         state.isAuth = true\r\n         localStorage.setItem('token',state.token) \r\n         localStorage.setItem('isAuth',state.isAuth) \r\n        },\r\n        [LoginUser.rejected]:(state,action)=>{\r\n        state.error = action.payload.error\r\n        state.isAuth = false\r\n\r\n        },\r\n\r\n\r\n\r\n      }\r\n    })\r\n\r\n\r\n\r\n    export default userSlice"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}