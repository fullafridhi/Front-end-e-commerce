{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nexport const RegisterUser = createAsyncThunk('Register', async (data, {\n  rejectedWithValue\n}) => {\n  try {\n    const res = await axios.post('/user/register', data);\n    return res.data;\n  } catch (error) {\n    rejectedWithValue(error.response.data.msg);\n  }\n});\nexport const LoginUser = createAsyncThunk('Login', async (data, {\n  rejectedWithValue\n}) => {\n  try {\n    const res = await axios.post('/user/login', data);\n    return res.data;\n  } catch (error) {\n    rejectedWithValue(error.response.data.msg);\n  }\n});\nconst UserSlice = createSlice({\n  name: 'user',\n  initialState: {\n    isLoading: false,\n    token: localStorage.getItem('token') || null,\n    error: false,\n    isAuth: Boolean(localStorage.getItem('isAuth')) || null\n  },\n  reducers: {\n    logout: state => {\n      localStorage.removeItem('token');\n      localStorage.removeItem('isAuth');\n      state.isAuth = false;\n      state.token = null;\n    }\n  },\n  //   extraReducers:{\n  //     [RegisterUser.pending]:(state)=>{state.isLoading = true},\n  //     [RegisterUser.fulfilled]:(state,action)=>{\n  //     state.token = action.payload.token \n  //     state.error = null\n  //     state.isAuth = true\n  //      localStorage.setItem('token',state.token) \n  //      localStorage.setItem('isAuth',state.isAuth) \n  //     },\n  //     [RegisterUser.rejected]:(state,action)=>{\n  //     state.error = action.payload.error\n  //     state.isAuth = false\n\n  //     },\n  //     [LoginUser.pending]:(state)=>{state.isLoading = true},\n  //     [LoginUser.fulfilled]:(state,action)=>{\n  //        state.token = action.payload.token \n  //        state.error = null\n  //        state.isAuth = true\n  //      localStorage.setItem('token',state.token) \n  //      localStorage.setItem('isAuth',state.isAuth) \n  //     },\n  //     [LoginUser.rejected]:(state,action)=>{\n  //     state.error = action.payload.error\n  //     state.isAuth = false\n\n  //     },\n\n  //   }\n  // })\n  extraReducers: builder => {\n    builder.addCase(RegisterUser.pending, state => {\n      state.isLoading = true;\n    }).addCase(RegisterUser.fulfilled, (state, action) => {\n      state.token = action.payload.token;\n      state.error = null;\n      state.isAuth = true;\n      localStorage.setItem('token', state.token);\n      localStorage.setItem('isAuth', state.isAuth);\n    }).addCase(RegisterUser.rejected, (state, action) => {\n      state.error = action.payload.error;\n      state.isAuth = false;\n    }).addCase(LoginUser.pending, state => {\n      state.isLoading = true;\n    }).addCase(LoginUser.fulfilled, (state, action) => {\n      state.token = action.payload.token;\n      state.error = null;\n      state.isAuth = true;\n      localStorage.setItem('token', state.token);\n      localStorage.setItem('isAuth', state.isAuth);\n    }).addCase(LoginUser.rejected, (state, action) => {\n      state.error = action.payload.error;\n      state.isAuth = false;\n    });\n  }\n});\nexport default UserSlice.reducer;\nexport const {\n  logout\n} = UserSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","RegisterUser","data","rejectedWithValue","res","post","error","response","msg","LoginUser","UserSlice","name","initialState","isLoading","token","localStorage","getItem","isAuth","Boolean","reducers","logout","state","removeItem","extraReducers","builder","addCase","pending","fulfilled","action","payload","setItem","rejected","reducer","actions"],"sources":["C:/Users/fulla/OneDrive/Desktop/Authentification/client/src/redux/slices/userSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice, } from \"@reduxjs/toolkit\";\r\nimport axios from 'axios'\r\n\r\n\r\n\r\n \r\n\r\nexport const RegisterUser = createAsyncThunk('Register',async(data,{rejectedWithValue})=>{\r\ntry{\r\nconst res = await axios.post('/user/register',data)\r\nreturn res.data;\r\n\r\n}\r\ncatch(error){\r\n rejectedWithValue(error.response.data.msg)\r\n\r\n}\r\n\r\n})\r\n\r\n\r\nexport const LoginUser = createAsyncThunk('Login',async(data,{rejectedWithValue})=>{\r\n    try{\r\n    const res = await axios.post('/user/login',data)\r\n    return res.data;\r\n    \r\n    }\r\n    catch(error){\r\n     rejectedWithValue(error.response.data.msg)\r\n    \r\n    }\r\n    \r\n    })\r\n    const UserSlice = createSlice({\r\n      name :'user',\r\n      initialState:{\r\n        isLoading : false,\r\n        token :localStorage.getItem('token') || null,error: false,\r\n        isAuth :Boolean(localStorage.getItem('isAuth')) || null\r\n\r\n\r\n      },\r\n      reducers:{\r\n        logout:(state)=>{\r\n           localStorage.removeItem('token')\r\n           localStorage.removeItem('isAuth')\r\n           state.isAuth = false\r\n           state.token = null \r\n        }\r\n\r\n      },\r\n    //   extraReducers:{\r\n    //     [RegisterUser.pending]:(state)=>{state.isLoading = true},\r\n    //     [RegisterUser.fulfilled]:(state,action)=>{\r\n    //     state.token = action.payload.token \r\n    //     state.error = null\r\n    //     state.isAuth = true\r\n    //      localStorage.setItem('token',state.token) \r\n    //      localStorage.setItem('isAuth',state.isAuth) \r\n    //     },\r\n    //     [RegisterUser.rejected]:(state,action)=>{\r\n    //     state.error = action.payload.error\r\n    //     state.isAuth = false\r\n\r\n    //     },\r\n    //     [LoginUser.pending]:(state)=>{state.isLoading = true},\r\n    //     [LoginUser.fulfilled]:(state,action)=>{\r\n    //        state.token = action.payload.token \r\n    //        state.error = null\r\n    //        state.isAuth = true\r\n    //      localStorage.setItem('token',state.token) \r\n    //      localStorage.setItem('isAuth',state.isAuth) \r\n    //     },\r\n    //     [LoginUser.rejected]:(state,action)=>{\r\n    //     state.error = action.payload.error\r\n    //     state.isAuth = false\r\n\r\n    //     },\r\n\r\n\r\n\r\n    //   }\r\n    // })\r\n extraReducers: (builder) => {\r\n    builder\r\n      .addCase(RegisterUser.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(RegisterUser.fulfilled, (state, action) => {\r\n        state.token = action.payload.token;\r\n        state.error = null;\r\n        state.isAuth = true;\r\n        localStorage.setItem('token', state.token);\r\n        localStorage.setItem('isAuth', state.isAuth);\r\n      })\r\n      .addCase(RegisterUser.rejected, (state, action) => {\r\n        state.error = action.payload.error;\r\n        state.isAuth = false;\r\n      })\r\n      .addCase(LoginUser.pending, (state) => {\r\n        state.isLoading = true;\r\n      })\r\n      .addCase(LoginUser.fulfilled, (state, action) => {\r\n        state.token = action.payload.token;\r\n        state.error = null;\r\n        state.isAuth = true;\r\n        localStorage.setItem('token', state.token);\r\n        localStorage.setItem('isAuth', state.isAuth);\r\n      })\r\n      .addCase(LoginUser.rejected, (state, action) => {\r\n        state.error = action.payload.error;\r\n        state.isAuth = false;\r\n      });\r\n  },\r\n});\r\n\r\n\r\n\r\n    export default UserSlice.reducer\r\n    export const {logout} = UserSlice.actions\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}