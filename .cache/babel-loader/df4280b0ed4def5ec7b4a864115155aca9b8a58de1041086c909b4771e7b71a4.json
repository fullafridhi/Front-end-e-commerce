{"ast":null,"code":"import { createAsyncThunk, createSlice } from \"@reduxjs/toolkit\";\nimport axios from 'axios';\nexport const RegisterUser = createAsyncThunk('Register', async (data, {\n  rejectedWithValue\n}) => {\n  try {\n    const res = await axios.post('/user/register', data);\n    return res.data;\n  } catch (error) {\n    rejectedWithValue(error.response.data.msg);\n  }\n});\nexport const LoginUser = createAsyncThunk('Login', async (data, {\n  rejectedWithValue\n}) => {\n  try {\n    const res = await axios.post('/user/login', data);\n    return res.data;\n  } catch (error) {\n    rejectedWithValue(error.response.data.msg);\n  }\n});\nconst UserSlice = createSlice({\n  name: 'user',\n  initialState: {\n    isLoading: false,\n    token: localStorage.getItem('token') || null,\n    error: false,\n    isAuth: Boolean(localStorage.getItem('isAuth')) || false\n  },\n  reducers: {\n    logout: state => {\n      localStorage.removeItem('token');\n      localStorage.removeItem('isAuth');\n      state.isAuth = false;\n      state.token = null;\n    }\n  },\n  extraReducers: {\n    [RegisterUser.pending]: state => {\n      state.isLoading = true;\n    },\n    [RegisterUser.fulfilled]: (state, action) => {\n      state.token = action.payload.token;\n      state.error = null;\n      state.isAuth = true;\n      localStorage.setItem('token', state.token);\n      localStorage.setItem('isAuth', state.isAuth);\n    },\n    [RegisterUser.rejected]: (state, action) => {\n      state.error = action.payload.error;\n      state.isAuth = false;\n    },\n    [LoginUser.pending]: state => {\n      state.isLoading = true;\n    },\n    [LoginUser.fulfilled]: (state, action) => {\n      state.token = action.payload.token;\n      state.isLoading = false;\n      state.error = null;\n      state.isAuth = true;\n      localStorage.setItem('token', state.token);\n      localStorage.setItem('isAuth', state.isAuth);\n    },\n    [LoginUser.rejected]: (state, action) => {\n      state.error = action.payload.error;\n      state.isAuth = false;\n    }\n  }\n});\nexport default UserSlice.reducer;\nexport const {\n  logout\n} = UserSlice.actions;","map":{"version":3,"names":["createAsyncThunk","createSlice","axios","RegisterUser","data","rejectedWithValue","res","post","error","response","msg","LoginUser","UserSlice","name","initialState","isLoading","token","localStorage","getItem","isAuth","Boolean","reducers","logout","state","removeItem","extraReducers","pending","fulfilled","action","payload","setItem","rejected","reducer","actions"],"sources":["C:/Users/fulla/OneDrive/Desktop/Authentification/client/src/redux/slices/userSlice.js"],"sourcesContent":["import { createAsyncThunk, createSlice, } from \"@reduxjs/toolkit\";\r\nimport axios from 'axios'\r\n\r\n\r\n\r\n \r\n\r\nexport const RegisterUser = createAsyncThunk('Register',\r\nasync(data,{rejectedWithValue})=>{\r\ntry{\r\nconst res = await axios.post('/user/register',data)\r\nreturn res.data;\r\n\r\n}\r\ncatch(error){\r\n rejectedWithValue(error.response.data.msg)\r\n\r\n}\r\n\r\n})\r\n\r\n\r\nexport const LoginUser = createAsyncThunk('Login',async(data,{rejectedWithValue})=>{\r\n    try{\r\n    const res = await axios.post('/user/login',data)\r\n    return res.data;\r\n    \r\n    }\r\n    catch(error){\r\n     rejectedWithValue(error.response.data.msg)\r\n    \r\n    }\r\n    \r\n    });\r\n    const UserSlice = createSlice({\r\n      name :'user',\r\n      initialState:{\r\n        isLoading : false,\r\n        token :localStorage.getItem('token') || null,\r\n        error: false,\r\n        isAuth :Boolean(localStorage.getItem('isAuth')) || false\r\n      },\r\n\r\n      reducers:{\r\n        logout:(state)=>{\r\n           localStorage.removeItem('token')\r\n           localStorage.removeItem('isAuth')\r\n           state.isAuth = false;\r\n           state.token = null ;\r\n        },\r\n\r\n      },\r\n      extraReducers:{\r\n        [RegisterUser.pending]:(state)=>\r\n          {state.isLoading = true},\r\n        \r\n        [RegisterUser.fulfilled]:(state,action)=>{\r\n            state.token = action.payload.token ;\r\n            state.error = null;\r\n        state.isAuth = true;\r\n         localStorage.setItem('token',state.token) \r\n         localStorage.setItem('isAuth',state.isAuth) \r\n        },\r\n\r\n        [RegisterUser.rejected]:(state,action)=>{\r\n        state.error = action.payload.error;\r\n        state.isAuth = false;\r\n\r\n        },\r\n        [LoginUser.pending]:(state)=>{\r\n          state.isLoading = true},\r\n        [LoginUser.fulfilled]:(state,action)=>{\r\n           state.token = action.payload.token \r\n           state.isLoading = false; \r\n           state.error = null\r\n           state.isAuth = true\r\n         localStorage.setItem('token',state.token) \r\n         localStorage.setItem('isAuth',state.isAuth) \r\n        },\r\n\r\n        [LoginUser.rejected]:(state,action)=>{\r\n        state.error = action.payload.error\r\n        state.isAuth = false;\r\n\r\n        },\r\n      }\r\n    })\r\n\r\n\r\n\r\n    export default UserSlice.reducer;\r\n    export const {logout} = UserSlice.actions\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}